# SOC-130: Jest 30 Upgrade (Deferred)

| Field | Value |
|-------|-------|
| Epic | E01-dependency-upgrades |
| Project | P4-maintenance |
| Status | backlog |
| Priority | Low |
| Story Points | 3 |
| Created | 2025-12-17 |
| Completed | - |

## Description

Upgrade Jest from v29 to v30 once ts-jest releases a compatible version (ts-jest 30.x). This task is deferred until the dependency ecosystem catches up.

## Acceptance Criteria

- [ ] ts-jest 30.x released and available
- [ ] Jest upgraded to v30
- [ ] ts-jest upgraded to v30
- [ ] @types/jest upgraded to v30
- [ ] All backend tests pass
- [ ] No deprecated matcher warnings

## Technical Notes

### Current Blocker

ts-jest 29.x has peer dependency: `jest: "^29.0.0"`

No ts-jest 30.x version exists yet. Must wait for release.

### Breaking Changes in Jest 30

1. **Node.js 18+ required** (we have v24, OK)
2. **Deprecated matchers removed**:
   - `.toBeCalled()` -> `.toHaveBeenCalled()`
   - `.toBeCalledWith()` -> `.toHaveBeenCalledWith()`
   - `.toThrowError()` -> `.toThrow()`

3. **Mock API changes**:
   - `jest.genMockFromModule()` -> `jest.createMockFromModule()`

### Current Status

- Codebase uses proper matcher names (verified)
- No deprecated APIs detected
- Ready to upgrade when ts-jest 30.x available

### Monitoring

Check for ts-jest 30.x release:
- https://github.com/kulshekhar/ts-jest/releases
- https://www.npmjs.com/package/ts-jest

## Implementation Notes

Closed Dependabot PR: #18

## Related

- Parent Epic: E01-dependency-upgrades
- Blocks: None
- Blocked by: ts-jest 30.x release
- PR: To be created when unblocked

---

**AI Agent Prompt:**

```
This task is DEFERRED until ts-jest 30.x is released.
When available:
1. Update jest, @types/jest, and ts-jest to v30
2. Run all backend tests
3. Fix any deprecated matcher usage
4. Create upgrade PR
Monitor: https://github.com/kulshekhar/ts-jest/releases
```
